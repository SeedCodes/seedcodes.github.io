<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SeedCodes â€” Project</title>
  <meta name="description" content="" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="../styles/main.css" />
  <link rel="stylesheet" href="../styles/project.css" />
</head>

<body>

  <div class="bg-gradient"></div>

  <nav class="navbar">
    <div class="nav-inner">
      <a href="../" class="nav-logo">
        <span class="logo-dot"></span>
        SeedCodes
      </a>
      <a href="../#projects" class="back-link" style="margin-left:auto;">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" />
        </svg>
        Back
      </a>
    </div>
  </nav>

  <main class="page-enter" id="projectMain">
    <div class="container" id="projectContent"></div>
  </main>

  <footer class="project-footer-bar">
    <div class="container">
      <p>&copy; 2026 SeedCodes. Engineered from scratch.</p>
    </div>
  </footer>

  <script type="module">
    import { projects } from '../js/data.js';
    window.__projects = projects;
    window.dispatchEvent(new Event('dataReady'));
  </script>
  <script>
    function renderProject() {
      var projects = window.__projects;
      if (!projects) return;

      var slug = new URLSearchParams(window.location.search).get('p');
      var project = projects.find(function (p) { return p.slug === slug; });
      var container = document.getElementById('projectContent');

      if (!project) {
        document.title = 'Module Not Found \u2014 SeedCodes';
        container.innerHTML = '<section class="project-hero"><h1>Module Not Found</h1><p class="project-tagline">This project module doesn\'t exist yet.</p></section>';
        return;
      }

      document.title = project.name + ' \u2014 SeedCodes';
      var descMeta = document.querySelector('meta[name="description"]');
      if (descMeta) descMeta.content = project.tagline || project.description;

      var statusMap = { active: 'ACTIVE MODULE', building: 'IN DEVELOPMENT', paused: 'PAUSED', research: 'RESEARCH PHASE' };

      var featuresHTML = (project.features || []).map(function (f, i) {
        return '<div class="feature-item reveal" data-delay="' + (i * 60) + '">' +
          '<div class="feature-icon">' + f.icon + '</div>' +
          '<div class="feature-name">' + f.name + '</div>' +
          '<div class="feature-desc">' + f.desc + '</div></div>';
      }).join('');

      var techHTML = (project.techDetail || project.stack).map(function (t) {
        return '<span class="tech-badge">' + t + '</span>';
      }).join('');

      var stepsHTML = (project.steps || []).map(function (s, i) {
        return '<div class="step reveal" data-delay="' + (i * 80) + '">' +
          '<span class="step-num">' + String(i + 1).padStart(2, '0') + '</span>' +
          '<span class="step-text">' + s + '</span></div>';
      }).join('');

      // Media carousel
      var mediaItems = (project.media || []).filter(function (m) { return m.src; });
      var mediaContent;
      if (mediaItems.length) {
        var slides = mediaItems.map(function (m) {
          return '<div class="media-slide"><img src="../' + m.src + '" alt="' + (m.alt || '') + '" loading="lazy" /></div>';
        }).join('');

        var dots = mediaItems.map(function (_, i) {
          return '<button class="media-dot' + (i === 0 ? ' active' : '') + '" data-index="' + i + '"></button>';
        }).join('');

        var prevArrow = '<button class="media-arrow media-arrow--prev" id="mediaPrev">' +
          '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5"/></svg></button>';
        var nextArrow = '<button class="media-arrow media-arrow--next" id="mediaNext">' +
          '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5"/></svg></button>';

        mediaContent = '<div class="media-carousel" id="mediaCarousel">' +
          '<div class="media-track" id="mediaTrack">' + slides + '</div>' +
          (mediaItems.length > 1 ? prevArrow + nextArrow : '') +
          '</div>' +
          (mediaItems.length > 1 ? '<div class="media-dots" id="mediaDots">' + dots + '</div>' : '');
      } else {
        mediaContent = '<div class="media-area"><span class="media-placeholder">[ Screenshots &amp; demo coming soon ]</span></div>';
      }

      // Custom action buttons
      var actionsHTML = (project.actions || []).filter(function (a) { return a.href; }).map(function (a) {
        return '<a href="' + a.href + '" target="_blank" rel="noopener noreferrer" class="btn-action btn-action--' + (a.style || 'secondary') + '">' + a.label + '</a>';
      }).join('');

      var actionTitle = 'Get Involved';
      if (project.actions && project.actions.length) {
        var first = project.actions[0].label;
        if (first === 'Download' || first === 'Releases') actionTitle = first;
      }

      container.innerHTML =
        '<section class="project-hero">' +
        '<div class="project-hero-badge">' +
        '<span class="status-dot dot-' + project.status + '"></span> ' +
        (statusMap[project.status] || project.status.toUpperCase()) +
        '</div>' +
        '<h1>' + project.name + '</h1>' +
        '<p class="project-tagline">' + (project.tagline || project.description) + '</p>' +
        '</section>' +

        '<section class="module">' +
        '<span class="module-label">// OVERVIEW</span>' +
        '<h2 class="module-title">What Is It?</h2>' +
        '<p class="module-text">' + (project.overview || project.description) + '</p>' +
        '</section>' +

        (featuresHTML ?
          '<section class="module">' +
          '<span class="module-label">// CAPABILITIES</span>' +
          '<h2 class="module-title">Features</h2>' +
          '<div class="features-grid">' + featuresHTML + '</div>' +
          '</section>' : '') +

        '<section class="module">' +
        '<span class="module-label">// TECH STACK</span>' +
        '<h2 class="module-title">Built With</h2>' +
        '<div class="tech-grid">' + techHTML + '</div>' +
        '</section>' +

        (stepsHTML ?
          '<section class="module">' +
          '<span class="module-label">// PROCESS</span>' +
          '<h2 class="module-title">How It Works</h2>' +
          '<div class="steps">' + stepsHTML + '</div>' +
          '</section>' : '') +

        '<section class="module">' +
        '<span class="module-label">// PREVIEW</span>' +
        '<h2 class="module-title">Media</h2>' +
        mediaContent +
        '</section>' +

        (actionsHTML ?
          '<section class="module">' +
          '<span class="module-label">// ACTIONS</span>' +
          '<h2 class="module-title">' + actionTitle + '</h2>' +
          '<div class="action-group">' + actionsHTML + '</div>' +
          '</section>' : '');

      // Init carousel
      if (mediaItems.length > 1) {
        var current = 0;
        var total = mediaItems.length;
        var track = document.getElementById('mediaTrack');
        var dots = document.querySelectorAll('.media-dot');
        var prev = document.getElementById('mediaPrev');
        var next = document.getElementById('mediaNext');

        function goTo(idx) {
          if (idx < 0) idx = total - 1;
          if (idx >= total) idx = 0;
          current = idx;
          track.style.transform = 'translateX(-' + (current * 100) + '%)';
          dots.forEach(function (d, i) {
            d.classList.toggle('active', i === current);
          });
        }

        prev.addEventListener('click', function () { goTo(current - 1); });
        next.addEventListener('click', function () { goTo(current + 1); });
        dots.forEach(function (d) {
          d.addEventListener('click', function () {
            goTo(parseInt(d.dataset.index, 10));
          });
        });
      }

      // Scroll reveal
      var els = container.querySelectorAll('.reveal');
      if ('IntersectionObserver' in window) {
        var obs = new IntersectionObserver(function (entries) {
          entries.forEach(function (e) {
            if (e.isIntersecting) {
              var d = parseInt(e.target.dataset.delay || '0', 10);
              setTimeout(function () { e.target.classList.add('visible'); }, d);
              obs.unobserve(e.target);
            }
          });
        }, { threshold: 0.08 });
        els.forEach(function (el) { obs.observe(el); });
      } else {
        els.forEach(function (el) { el.classList.add('visible'); });
      }
    }

    if (window.__projects) {
      renderProject();
    } else {
      window.addEventListener('dataReady', renderProject);
    }
  </script>
</body>

</html>